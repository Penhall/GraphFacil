// D:\PROJETOS\GraphFacil\Library\Models\DezenaOscilante.cs - Classe para oscilação de dezenas
using CommunityToolkit.Mvvm.ComponentModel;
using System;

namespace LotoLibrary.Models
{
    /// <summary>
    /// Representa uma dezena com propriedades de oscilação
    /// </summary>
    public partial class DezenaOscilante : ObservableObject
    {
        [ObservableProperty]
        private int _numero;

        [ObservableProperty]
        private double _fase; // 0° a 360°

        [ObservableProperty]
        private double _frequencia;

        [ObservableProperty]
        private bool _foiSorteada;

        [ObservableProperty]
        private double _forcaSincronizacao;

        [ObservableProperty]
        private int _ultimoAtraso;

        [ObservableProperty]
        private double _probabilidade;

        [ObservableProperty]
        private double _amplitude;

        [ObservableProperty]
        private bool _estaSincronizada;

        public DezenaOscilante()
        {
            Numero = 0;
            Fase = 0.0;
            Frequencia = 1.0;
            FoiSorteada = false;
            ForcaSincronizacao = 0.5;
            UltimoAtraso = 0;
            Probabilidade = 0.0;
            Amplitude = 1.0;
            EstaSincronizada = false;
        }

        public DezenaOscilante(int numero)
        {
            Numero = numero;
            Fase = new Random().Next(0, 360);
            Frequencia = 1.0;
            FoiSorteada = false;
            ForcaSincronizacao = 0.5;
            UltimoAtraso = 0;
            Probabilidade = 0.0;
            Amplitude = 1.0;
            EstaSincronizada = false;
        }

        public void AplicarInfluencia(double influencia)
        {
            // A influência ajusta a fase do oscilador
            Fase += influencia;
            Fase = (Fase % 360 + 360) % 360; // Normaliza a fase para 0-360
        }
    }
}
