<!-- D:\PROJETOS\GraphFacil\Dashboard\MainWindow.xaml - Adições para Fase 1 -->
<!-- ✅ ADICIONAR ESTAS SEÇÕES AO XAML EXISTENTE -->

<Window x:Class="Dashboard.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:md="http://materialdesigninxaml.net/winfx/xaml/themes">

    <Grid>
        <!-- Layout existente mantido -->
        
        <!-- ✅ ADICIONAR: Seção de Status do PredictionEngine -->
        <Border Grid.Row="0" Grid.Column="1" 
                Background="#FF2E3440" 
                Margin="10,10,10,5"
                CornerRadius="8"
                BorderBrush="#FF434C5E" 
                BorderThickness="1">
            
            <StackPanel Margin="15">
                <TextBlock Text="🚀 PREDICTION ENGINE - FASE 1" 
                           FontSize="16" 
                           FontWeight="Bold" 
                           Foreground="White" 
                           HorizontalAlignment="Center" 
                           Margin="0,0,0,15"/>

                <!-- Status do Engine -->
                <Grid Margin="0,0,0,10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    
                    <TextBlock Grid.Column="0" 
                               Text="Status:" 
                               Foreground="#FFECEFF4" 
                               FontWeight="SemiBold" 
                               VerticalAlignment="Center"/>
                    
                    <TextBlock Grid.Column="1" 
                               Text="{Binding PredictionEngineStatus}" 
                               Foreground="{Binding IsPredictionEngineInitialized, Converter={StaticResource BoolToColorConverter}}"
                               FontFamily="Consolas"
                               FontSize="11"
                               Margin="10,0,0,0"
                               TextWrapping="Wrap"/>
                </Grid>

                <!-- Última Predição -->
                <Grid Margin="0,0,0,10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    
                    <TextBlock Grid.Column="0" 
                               Text="Última:" 
                               Foreground="#FFECEFF4" 
                               FontWeight="SemiBold" 
                               VerticalAlignment="Top"/>
                    
                    <TextBlock Grid.Column="1" 
                               Text="{Binding LastPredictionResult}" 
                               Foreground="#FFD8DEE9"
                               FontFamily="Consolas"
                               FontSize="10"
                               Margin="10,0,0,0"
                               TextWrapping="Wrap"/>
                </Grid>

                <!-- Status de Validação -->
                <Grid Margin="0,0,0,15">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    
                    <TextBlock Grid.Column="0" 
                               Text="Validação:" 
                               Foreground="#FFECEFF4" 
                               FontWeight="SemiBold" 
                               VerticalAlignment="Center"/>
                    
                    <TextBlock Grid.Column="1" 
                               Text="{Binding Phase1ValidationStatus}" 
                               Foreground="#FFD8DEE9"
                               FontFamily="Consolas"
                               FontSize="10"
                               Margin="10,0,0,0"
                               TextWrapping="Wrap"/>
                </Grid>

                <Separator Background="#FF434C5E" Margin="0,0,0,15"/>

                <!-- Botões da Fase 1 -->
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Gerar Palpite Novo -->
                    <Button Grid.Row="0" Grid.Column="0"
                            Style="{StaticResource MenuButton}"
                            Command="{Binding GerarPalpiteNovoCommand}"
                            Margin="0,0,5,5"
                            Background="#FF5E81AC"
                            BorderBrush="#FF81A1C1">
                        <StackPanel Orientation="Horizontal">
                            <md:PackIcon Kind="AutoFix" VerticalAlignment="Center" Margin="0,0,8,0"/>
                            <TextBlock Text="Palpite Novo" FontSize="11"/>
                        </StackPanel>
                    </Button>

                    <!-- Diagnósticos -->
                    <Button Grid.Row="0" Grid.Column="1"
                            Style="{StaticResource MenuButton}"
                            Command="{Binding ExecutarDiagnosticosCommand}"
                            Margin="5,0,0,5"
                            Background="#FFBF616A"
                            BorderBrush="#FFD08770">
                        <StackPanel Orientation="Horizontal">
                            <md:PackIcon Kind="BugCheck" VerticalAlignment="Center" Margin="0,0,8,0"/>
                            <TextBlock Text="Diagnóstico" FontSize="11"/>
                        </StackPanel>
                    </Button>

                    <!-- Validar Fase 1 -->
                    <Button Grid.Row="1" Grid.Column="0"
                            Style="{StaticResource MenuButton}"
                            Command="{Binding ValidarFase1Command}"
                            Margin="0,5,5,5"
                            Background="#FFA3BE8C"
                            BorderBrush="#FFEBCB8B">
                        <StackPanel Orientation="Horizontal">
                            <md:PackIcon Kind="CheckCircle" VerticalAlignment="Center" Margin="0,0,8,0"/>
                            <TextBlock Text="Validar F1" FontSize="11"/>
                        </StackPanel>
                    </Button>

                    <!-- Comparar Performance -->
                    <Button Grid.Row="1" Grid.Column="1"
                            Style="{StaticResource MenuButton}"
                            Command="{Binding CompararPerformanceCommand}"
                            Margin="5,5,0,5"
                            Background="#FFB48EAD"
                            BorderBrush="#FFBFA3C3">
                        <StackPanel Orientation="Horizontal">
                            <md:PackIcon Kind="Compare" VerticalAlignment="Center" Margin="0,0,8,0"/>
                            <TextBlock Text="Comparar" FontSize="11"/>
                        </StackPanel>
                    </Button>

                    <!-- Loading Indicator -->
                    <Grid Grid.Row="2" Grid.ColumnSpan="2" 
                          Margin="0,10,0,0"
                          Visibility="{Binding IsValidationRunning, Converter={StaticResource BoolToVisibilityConverter}}">
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                            <md:PackIcon Kind="Loading" 
                                         Foreground="#FF88C0D0"
                                         Width="16" Height="16"
                                         VerticalAlignment="Center">
                                <md:PackIcon.RenderTransform>
                                    <RotateTransform x:Name="LoadingRotation"/>
                                </md:PackIcon.RenderTransform>
                                <md:PackIcon.Triggers>
                                    <EventTrigger RoutedEvent="Loaded">
                                        <BeginStoryboard>
                                            <Storyboard RepeatBehavior="Forever">
                                                <DoubleAnimation Storyboard.TargetName="LoadingRotation"
                                                               Storyboard.TargetProperty="Angle"
                                                               From="0" To="360"
                                                               Duration="0:0:1"/>
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </EventTrigger>
                                </md:PackIcon.Triggers>
                            </md:PackIcon>
                            <TextBlock Text="Executando validação..." 
                                       Foreground="#FF88C0D0" 
                                       FontSize="11" 
                                       Margin="8,0,0,0"
                                       VerticalAlignment="Center"/>
                        </StackPanel>
                    </Grid>
                </Grid>
            </StackPanel>
        </Border>

        <!-- ✅ ADICIONAR: Seção de Métricas da Fase 1 -->
        <Border Grid.Row="1" Grid.Column="1" 
                Background="#FF3B4252" 
                Margin="10,5,10,10"
                CornerRadius="8"
                BorderBrush="#FF434C5E" 
                BorderThickness="1">
            
            <StackPanel Margin="15">
                <TextBlock Text="📊 MÉTRICAS - FASE 1" 
                           FontSize="14" 
                           FontWeight="Bold" 
                           Foreground="White" 
                           HorizontalAlignment="Center" 
                           Margin="0,0,0,15"/>

                <!-- Grid de Métricas -->
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Arquitetura -->
                    <TextBlock Grid.Row="0" Grid.Column="0" 
                               Text="Arquitetura:" 
                               Foreground="#FFECEFF4" 
                               FontWeight="SemiBold"
                               Margin="0,0,0,5"/>
                    <TextBlock Grid.Row="0" Grid.Column="1" 
                               Text="✅ Refatorada" 
                               Foreground="#FFA3BE8C"
                               FontSize="11"
                               Margin="0,0,0,5"/>

                    <!-- Interfaces -->
                    <TextBlock Grid.Row="1" Grid.Column="0" 
                               Text="Interfaces:" 
                               Foreground="#FFECEFF4" 
                               FontWeight="SemiBold"
                               Margin="0,0,0,5"/>
                    <TextBlock Grid.Row="1" Grid.Column="1" 
                               Text="✅ Implementadas" 
                               Foreground="#FFA3BE8C"
                               FontSize="11"
                               Margin="0,0,0,5"/>

                    <!-- Bug Fix -->
                    <TextBlock Grid.Row="2" Grid.Column="0" 
                               Text="Bug Dezenas:" 
                               Foreground="#FFECEFF4" 
                               FontWeight="SemiBold"
                               Margin="0,0,0,5"/>
                    <TextBlock Grid.Row="2" Grid.Column="1" 
                               Text="{Binding DezenaBugStatus, FallbackValue='⏳ Verificando'}" 
                               Foreground="#FFEBCB8B"
                               FontSize="11"
                               Margin="0,0,0,5"/>

                    <!-- Compatibilidade -->
                    <TextBlock Grid.Row="3" Grid.Column="0" 
                               Text="Compatibilidade:" 
                               Foreground="#FFECEFF4" 
                               FontWeight="SemiBold"/>
                    <TextBlock Grid.Row="3" Grid.Column="1" 
                               Text="✅ Mantida" 
                               Foreground="#FFA3BE8C"
                               FontSize="11"/>
                </Grid>

                <Separator Background="#FF434C5E" Margin="0,15,0,10"/>

                <!-- Próximos Passos -->
                <TextBlock Text="🎯 PRÓXIMOS PASSOS:" 
                           FontSize="12" 
                           FontWeight="Bold" 
                           Foreground="#FF88C0D0" 
                           Margin="0,0,0,10"/>

                <StackPanel>
                    <TextBlock Text="• Modelos Anti-Frequencistas" 
                               Foreground="#FFD8DEE9" 
                               FontSize="10" 
                               Margin="10,0,0,3"/>
                    <TextBlock Text="• Sistema de Ensemble" 
                               Foreground="#FFD8DEE9" 
                               FontSize="10" 
                               Margin="10,0,0,3"/>
                    <TextBlock Text="• Modelos Avançados (IA)" 
                               Foreground="#FFD8DEE9" 
                               FontSize="10" 
                               Margin="10,0,0,3"/>
                    <TextBlock Text="• Meta-Learning" 
                               Foreground="#FFD8DEE9" 
                               FontSize="10" 
                               Margin="10,0,0,0"/>
                </StackPanel>
            </StackPanel>
        </Border>
    </Grid>

    <!-- ✅ ADICIONAR: Recursos e Converters -->
    <Window.Resources>
        <!-- Converter para Bool to Color -->
        <local:BoolToColorConverter x:Key="BoolToColorConverter"/>
        
        <!-- Converter para Bool to Visibility -->
        <BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
        
        <!-- Style para MenuButton (se não existir) -->
        <Style x:Key="MenuButton" TargetType="Button">
            <Setter Property="Background" Value="#FF4C566A"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#FF5E81AC"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Padding" Value="8"/>
            <Setter Property="Margin" Value="2"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" 
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="6">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#FF5E81AC"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#FF434C5E"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="border" Property="Background" Value="#FF3B4252"/>
                                <Setter Property="Foreground" Value="#FF6B7280"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
</Window>